{% extends 'base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/board_list.css' %}" />
<link rel="stylesheet" href="{% static 'css/board_detail.css' %}" />
{% endblock %}

{% block title %}
{% if board_type == 'notice' %}공지사항{% elif board_type == 'event' %}이벤트{% else %}자유게시판{% endif %} 상세 - 할래말래
{% endblock %}

{% block contents %}

<!-- Hero 섹션 -->
<div class="board-hero {% if board_type == 'notice' %}notice-hero{% elif board_type == 'event' %}event-hero{% else %}post-hero{% endif %}">
  <h2>{% if board_type == 'notice' %}공지할래{% elif board_type == 'event' %}이벤트볼래{% else %}수다떨래{% endif %}</h2>
</div>

<!-- 서브 컨테이너 -->
<div class="sub-container">
    <div class="sub-content">
        
        <!-- 게시글 정보 -->
        <section class="article-header">
            <h1 class="article-title">{{ article.title }}</h1>
            <div class="article-meta">
                <span class="article-author">작성자: {{ article.author }}</span>
                <span class="article-date">{{ article.date }}</span>
                <span class="article-views">조회수: {{ article.views }}</span>
            </div>
        </section>

        <hr class="article-divider">

        <!-- 게시글 내용 -->
        <section class="article-content">
            <div class="article-body">
                {{ article.contents|linebreaksbr }}
            </div>
        </section>

        <!-- 첨부파일 (추후 추가) -->
        {% if article.files %}
        <section class="article-files">
            <h3 class="section-title">첨부파일</h3>
            <ul class="file-list">
                {% for file in article.files %}
                <li><a href="{{ file.url }}" download>{{ file.name }}</a></li>
                {% endfor %}
            </ul>
        </section>
        {% endif %}

        <!-- 버튼 영역 -->
        <div class="article-actions">
            <a href="/board/{{ board_type }}/" class="btn btn-list">목록으로</a>
            <!-- TODO: 수정/삭제 버튼 (작성자 또는 관리자만 표시) -->
        </div>

        <hr class="article-divider">

        <!-- 댓글 섹션 -->
        <section class="comment-section">
            <h3 class="section-title">댓글 ({{ comments|length }})</h3>

            <!-- 댓글 리스트 -->
            <ul class="comment-list">
                {% for comment in comments %}
                <li class="comment-item">
                    <div class="comment-meta">
                        <span class="comment-writer">{{ comment.author }}</span>
                        <span class="comment-date">{{ comment.reg_date|date:"Y-m-d H:i" }}</span>
                        <!-- TODO: 수정/삭제 버튼 (본인만 표시) -->
                    </div>
                    <p class="comment-content">{{ comment.comment|linebreaksbr }}</p>
                </li>
                {% empty %}
                <li class="comment-empty">아직 등록된 댓글이 없습니다.</li>
                {% endfor %}
            </ul>

            <!-- 댓글 입력 폼 -->
            <form method="post" action="/board/{{ board_type }}/{{ article.article_id }}/comment/" class="comment-form">
                {% csrf_token %}
                <label for="comment" class="form-label">댓글 쓰기</label>
                <textarea id="comment" name="content" class="form-textarea" rows="3" placeholder="댓글을 입력하세요" required></textarea>
                <div class="comment-btn-box">
                    <button type="submit" class="btn btn-submit">등록</button>
                </div>
            </form>
        </section>

    </div>
</div>

{% endblock %}

