{% extends 'common/base.html' %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'board/css/board_list.css' %}" />
{% endblock %}

{% block script1 %}
<script src="{% static 'board/js/board_list.js' %}"></script>
{% endblock %}

{% block title %}
{{ b_name }} - í• ë˜ë§ë˜
{% endblock %}

{% block contents %}

<!-- Hero ì„¹ì…˜ -->
<div class="board-hero event-hero">
    <h2>{{ b_name }}</h2>
</div>

<div class="sub-container page-board-list">
    <div class="sub-content">

        <!-- ê²€ìƒ‰ ì„¹ì…˜ -->
        <section class="search-section">
            <div class="search-controls">
                <select class="search-dropdown" id="searchType">
                    <option value="all">ì „ì²´</option>
                    <option value="title">ì œëª©</option>
                    <option value="author">ì‘ì„±ì</option>
                </select>
            </div>

            <div class="search-input-group">
                <input type="text" class="search-input" id="searchKeyword" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                <button type="button" class="search-btn" id="searchBtn">
                    <span>ğŸ”</span> ê²€ìƒ‰
                </button>
            </div>
        </section>

        <!-- ê²Œì‹œê¸€ ë¦¬ìŠ¤íŠ¸ ì˜ì—­ -->
        <section class="search-list-section">

            <!-- ê³ ì • ê²Œì‹œê¸€ -->
            {% if board_id == 2 and noticeList %}
            <div class="pinned-section" id="pinnedSection">
                <h3 class="pinned-title">ğŸ“Œ ê³ ì • ê²Œì‹œê¸€</h3>

                <div class="facility-list" id="pinnedList">
                    <ul>
                        {% for item in noticeList %}
                        <li class="facility-item pinned-item">
                            <span class="pinned-badge">ê³ ì •</span>
                            <span class="facility-order">{{ forloop.counter }}</span>

                            <!-- ì´ë²¤íŠ¸ ìƒì„¸ URL -->
                            <a href="{% url 'board:detail' board_name item.id %}" class="facility-title">
                                {{ item.title }}({{ item.comment_count }})
                            </a>

                            <span class="facility-author">
                                {{ item.author }}{% if item.is_admin %} ğŸ‘‘{% endif %}
                            </span>
                            <span class="facility-date">{{ item.date }}</span>
                            <span class="facility-views">{{ item.views }}</span>
                        </li>

                        {% empty %}
                        <li class="no-pinned">ê³ ì •ëœ ê²Œì‹œê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
                        {% endfor %}
                    </ul>
                </div>
            </div>

            {% if noticeList %}
            <hr class="dividing-line">
            {% endif %}
            {% endif %}
            <!-- ì¼ë°˜ ê²Œì‹œê¸€ -->
            <div class="facility-list" id="facilityList">

                <div class="facility-header">
                    <span class="facility-title">ë²ˆí˜¸</span>
                    <span class="facility-title">ì œëª©</span>
                    <span class="facility-title">ì‘ì„±ì</span>
                    <span class="facility-title">ì‘ì„±ë‚ ì§œ</span>
                    <span class="facility-title">ì¡°íšŒìˆ˜</span>
                </div>

                <ul>
                    {% for article in page_obj %}
                    <li class="facility-item">

                        <span class="facility-order">
                            {# {{ page_start|add:-forloop.counter0 }} #}
                             {{ page_start|add:forloop.counter0 }}
                        </span>

                        <!-- ì´ë²¤íŠ¸ ìƒì„¸ URL -->
                        <a href="{% url 'board:detail' board_name article.article_id %}" class="facility-title">
                            {{ article.title }} ({{ article.comment_count }})
                        </a>

                        <span class="facility-author {% if article.member_id.manager_yn == 1 %}admin-badge{% endif %}">
                            {{ article.member_id.nickname|default:"ì•Œ ìˆ˜ ì—†ìŒ" }}{% if article.member_id.manager_yn == 1 %}
                            ğŸ‘‘{% endif %}
                        </span>

                        <span class="facility-date">{{ article.reg_date|date:"Y-m-d" }}</span>
                        <span class="facility-views">{{ article.view_cnt }}</span>
                    </li>

                    {% empty %}
                    <li class="facility-empty">ë“±ë¡ëœ ì´ë²¤íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</li>
                    {% endfor %}
                </ul>

            </div>

        </section>
        {% if board_id == 4 %}
        <div class="write-btn-container">
            <a href="{% url 'board:write' board_name %}" class="write-btn">ì‘ì„±í•˜ê¸°</a>
        </div>
        {% endif %}
        <!-- Pagination -->
        <div class="pagination">

            {% if block_start > 1 %}
            <a href="?page={{ block_start|add:-1 }}&per_page={{ per_page }}&sort={{ sort }}" class="page-btn arrow">â—€
                ì´ì „</a>
            {% else %}
            <span class="page-btn arrow disabled">â—€ ì´ì „</span>
            {% endif %}

            {% for num in block_range %}
            {% if num == page_obj.number %}
            <span class="page-btn active">{{ num }}</span>
            {% else %}
            <a href="?page={{ num }}&per_page={{ per_page }}&sort={{ sort }}" class="page-btn">{{ num }}</a>
            {% endif %}
            {% endfor %}

            {% if block_end < paginator.num_pages %} <a
                href="?page={{ block_end|add:1 }}&per_page={{ per_page }}&sort={{ sort }}" class="page-btn arrow">ë‹¤ìŒ
                â–¶</a>
                {% else %}
                <span class="page-btn arrow disabled">ë‹¤ìŒ â–¶</span>
                {% endif %}

        </div>

    </div>
</div>

{% endblock %}