{% extends 'base.html' %}
{% load static %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/recruitment_list.css' %}" />
{% endblock %}


{% block title %}
ëª¨ì§‘í• ë˜ - í• ë˜ë§ë˜
{% endblock %}

{% block script1 %}
<script src="{% static 'js/recruitment_list.js' %}"></script>
{% endblock %}

{% block contents %}

<!-- Hero ì„¹ì…˜ -->
<div class="board-hero recruitment-hero reveal">
  <h2>ëª¨ì§‘í• ë˜</h2>
</div>


<!-- ì„œë¸Œ ì»¨í…Œì´ë„ˆ -->
<div class="sub-container page-recruitment reveal">

    <div class="sub-content">
        
    <!-- ê²€ìƒ‰ ì„¹ì…˜ -->
<form id="searchForm" method="get">
    <section class="search-section">
        <div class="search-controls">
            <!-- ê²€ìƒ‰ íƒ€ì… -->
            <select class="search-dropdown" id="searchType" name="search_type">
                <option value="all" {% if search_type == "all" %}selected{% endif %}>ì „ì²´</option>
                <option value="facility" {% if search_type == "facility" %}selected{% endif %}>ì‹œì„¤ëª…</option>
                <option value="sport" {% if search_type == "sport" %}selected{% endif %}>ì¢…ëª©ëª…</option>
            </select>

            <!-- ì‹œ/ë„ ì„ íƒ -->
            <select id="sido" class="search-dropdown" name="sido">
                <option value="">ì‹œ/ë„ ì„ íƒ</option>
                {% if sido %}
                    <!-- JSì—ì„œ ì˜µì…˜ ì±„ìš¸ ê±°ë©´, ì„ íƒê°’ë§Œ ìœ ì§€ìš© data ì†ì„± -->
                {% endif %}
            </select>

            <!-- êµ¬/êµ° ì„ íƒ -->
            <select id="sigungu" class="search-dropdown" name="sigungu">
                <option value="">êµ¬/êµ° ì„ íƒ</option>
            </select>
        </div>

        <div class="search-input-group">
            <input
                type="text"
                class="search-input"
                id="searchKeyword"
                name="keyword"
                placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”"
                value="{{ keyword }}"
            >
            <!-- ê²€ìƒ‰ ë²„íŠ¼ì€ submit -->
            <button type="submit" class="search-btn" id="searchBtn">
                <span>ğŸ”</span> ê²€ìƒ‰
            </button>
        </div>
    </section>

    <section class="search-list-section">
        
        
        <div class="sort-page-container">

            <!-- ì™¼ìª½: ì •ë ¬ + ëª¨ì§‘ìƒíƒœ -->
            <div class="sort-left-group">
                <select class="search-dropdown" id="sortSelect" name="sort">
                    <option value="recent" {% if sort == "recent" %}selected{% endif %}>ìµœì‹ ìˆœ</option>
                    <option value="title" {% if sort == "title" %}selected{% endif %}>ì œëª©ìˆœ</option>
                    <option value="views" {% if sort == "views" %}selected{% endif %}>ì¡°íšŒìˆ˜ìˆœ</option>
                </select>

                <select class="search-dropdown" id="statusFilter" name="status">
                    <option value="all" {% if status == "all" %}selected{% endif %}>ì „ì²´</option>
                    <option value="open" {% if status == "open" %}selected{% endif %}>ëª¨ì§‘ì¤‘</option>
                    <option value="closed" {% if status == "closed" %}selected{% endif %}>ë§ˆê°</option>
                </select>
            </div>

            <!-- ì˜¤ë¥¸ìª½: í˜ì´ì§€ë‹¹ ê°œìˆ˜ -->
            <div class="sort-right-group">
                <select class="search-dropdown" id="perPageSelect" name="per_page">
                    <option value="15" {% if per_page == 15 %}selected{% endif %}>15ê°œ</option>
                    <option value="30" {% if per_page == 30 %}selected{% endif %}>30ê°œ</option>
                    <option value="50" {% if per_page == 50 %}selected{% endif %}>50ê°œ</option>
                    <option value="100" {% if per_page == 100 %}selected{% endif %}>100ê°œ</option>
                </select>
            </div>
        </div>


        <hr class="dividing-line">
            
            
            
<div class="facility-list recruitment-list" id="facilityList">
    <!-- í—¤ë” -->
    <div class="facility-header">
        <span class="facility-col col-no">ë²ˆí˜¸</span>
        <span class="facility-col col-title">ì œëª©</span>
        <span class="facility-col col-num">ëª¨ì§‘ì¸ì›</span>
        <span class="facility-col col-status">ë§ˆê°ì—¬ë¶€</span>
        <span class="facility-col col-writer">ì‘ì„±ì</span>
        <span class="facility-col col-views">ì¡°íšŒìˆ˜</span>
        <span class="facility-col col-date">ì‘ì„±ë‚ ì§œ</span>
    </div>

    <ul>
        {% for item in page_obj %}
            <li class="facility-item">
                
                <!-- ë²ˆí˜¸ -->
                <span class="facility-col col-no">
                    {{ forloop.counter0|add:page_obj.start_index }}
                </span>

                <!-- ì œëª© -->
                <span class="facility-col col-title">
                    <a href="{% url 'recruitment:recruitment_detail' item.pk %}">
                        {{ item.title }} ({{ item.comment_count }})
                    </a>
                </span>

                
                <!-- ëª¨ì§‘ì¸ì› -->
                <span class="facility-col col-num">
                    {{ item.num_member }}ëª…
                </span>
                
                <!-- ë§ˆê°ì—¬ë¶€ -->
                <span class="facility-col col-status">
                    {% if item.is_closed %}
                        <span class="badge badge-end">ë§ˆê°</span>
                    {% else %}
                        <span class="badge badge-open">ì§„í–‰ì¤‘</span>
                    {% endif %}

                </span>

                
                
                <!-- ì‘ì„±ì -->
                <span class="facility-col col-writer">
                    {{ item.member_id.user_id }}
                </span>
                <!-- ì¡°íšŒìˆ˜ -->
                <span class="facility-col col-views">
                    {{ item.view_cnt }}
                </span>
                
                <!-- ì‘ì„±ë‚ ì§œ -->
                <span class="facility-col col-date">
                    {{ item.reg_date|date:"Y-m-d" }}
                </span>
            </li>
        {% empty %}
            <li class="facility-empty">ë“±ë¡ëœ ëª¨ì§‘ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
        {% endfor %}
    </ul>
</div>



        </section>
    </form>
    
    
    
    
    
        <div class="write-btn-container">
            <a href="{% url 'recruitment:recruitment_write' %}" class="write-btn">ì‘ì„±í•˜ê¸°</a>
        </div>

        <div class="pagination">

            <!-- ğŸ”¹ ì´ì „ ë¸”ë¡ -->
            {% if block_start > 1 %}
                <a href="?page={{ num }}
                    &per_page={{ per_page }}
                    &sort={{ sort }}
                    &search_type={{ search_type }}
                    &keyword={{ keyword|urlencode }}
                    &sido={{ sido|urlencode }}
                    &sigungu={{ sigungu|urlencode }}
                    &status={{ status }}
                    &facility={{ facility|urlencode }}" class="page-btn arrow">â—€ ì´ì „</a>
            {% else %}
                <span class="page-btn arrow disabled">â—€ ì´ì „</span>
            {% endif %}
            
            <!-- ğŸ”¹ í˜ì´ì§€ ë²ˆí˜¸ 5ê°œì”© ë¸”ë¡ -->
            {% for num in block_range %}
                {% if num == page_obj.number %}
                    <span class="page-btn active">{{ num }}</span>
                {% else %}
                    <a href="?page={{ num }}
                        &per_page={{ per_page }}
                        &sort={{ sort }}
                        &search_type={{ search_type }}
                        &keyword={{ keyword|urlencode }}
                        &sido={{ sido|urlencode }}
                        &sigungu={{ sigungu|urlencode }}
                        &status={{ status }}
                        &facility={{ facility|urlencode }}" class="page-btn">{{ num }}</a>
                {% endif %}
            {% endfor %}

            <!-- ğŸ”¹ ë‹¤ìŒ ë¸”ë¡ -->
            {% if block_end < paginator.num_pages %}
                <a href="?page={{ num }}
                    &per_page={{ per_page }}
                    &sort={{ sort }}
                    &search_type={{ search_type }}
                    &keyword={{ keyword|urlencode }}
                    &sido={{ sido|urlencode }}
                    &sigungu={{ sigungu|urlencode }}
                    &status={{ status }}
                    &facility={{ facility|urlencode }}" class="page-btn arrow">ë‹¤ìŒ â–¶</a>
            {% else %}
                <span class="page-btn arrow disabled">ë‹¤ìŒ â–¶</span>
            {% endif %}

        </div>


    </div>
</div>



{% endblock %}
