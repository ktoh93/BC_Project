{% extends 'manager_base.html' %}
{% load static %}

{% block title %}ì‹œì„¤ ìƒì„¸ë³´ê¸°{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/facility_detail_manager.css' %}" />
{% endblock %}

{% block content %}
<div class="facility-detail-container">

    <!-- ìƒë‹¨: ì´ë¯¸ì§€ + ìƒì„¸ì •ë³´ -->
    <section class="detail-top-wrapper">

        <section class="detail-image-wrap">
            {% if facilityInfo.photo %}
            <img src="{{ facilityInfo.photo.url }}" alt="{{ facilityInfo.faci_nm }}">
            {% else %}
            <img src="{% static 'img/no_image.png' %}" alt="ì‚¬ì§„ ì—†ìŒ">
            {% endif %}
        </section>

        <section class="detail-info-wrap">
            <h3>{{ facilityInfo.faci_nm }}</h3>

            <section class="detail-info-row">
                <b>ì—…ì¢…ëª… :</b> <span>{{ facility.fcob_nm }}</span>
            </section>

            <section class="detail-info-row">
                <b>ì£¼ì†Œ :</b> <span>{{ facilityInfo.address }}</span>
            </section>

            {% if facilityInfo.tel %}
            <section class="detail-info-row">
                <b>ì „í™”ë²ˆí˜¸ :</b> <span>{{ facilityInfo.tel }}</span>
            </section>
            {% endif %}

            {% if facilityInfo.homepage %}
            <section class="detail-info-row">
                <b>í™ˆí˜ì´ì§€ :</b>
                <a href="{{ facilityInfo.homepage }}">
                    <span>{{ facilityInfo.homepage }}</span>
                </a>
            </section>
            {% endif %}

            <section class="detail-info-row">
                <b>ìš´ì˜ìƒíƒœ :</b> <span>{{ facility.faci_stat_nm }}</span>
            </section>

            <section class="detail-info-row">
                <b>ì•ˆì „ë“±ê¸‰ :</b> <span>{{ facility.schk_tot_grd_nm }}</span>
            </section>

            <section class="detail-info-row timetable">
                <b>ì‹œê°„í‘œ :</b>

                <div class="timetable-list">
                    {% for r in reservation_list %}
                    <div class="timetable-item {% if r.active %}active{% endif %}">
                        <span class="day">{{ r.day_kr }}</span>

                        {% if r.active %}
                        <span class="time">{{ r.open }} ~ {{ r.close }}</span>
                        <span class="interval">({{ r.interval }}ë¶„)</span>
                        {% else %}
                        <span class="time disabled">ìš´ì˜ ì—†ìŒ</span>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
            </section>


            <section class="detail-buttons">
                <a href="{% url 'facility_list' %}" class="btn-reserve">ëª©ë¡ìœ¼ë¡œ</a>
                <a href="{% url 'facility_modify' facilityInfo.id %}" class="btn-modify">ìˆ˜ì •í•˜ê¸°</a>
            </section>

        </section>
    </section>

    <!-- ì•„ë˜: ëŒ“ê¸€ ì˜ì—­ (flex ë°–ìœ¼ë¡œ ë¶„ë¦¬ë¨) -->
    <section class="comment-section">
        <h3 class="section-title">ëŒ“ê¸€ ({{ comments|length }})</h3>

        <ul class="comment-list">
            {% for comment in comments %}
            <li class="comment-item {% if comment.is_deleted %}comment-deleted{% endif %}">
                <div class="comment-meta">
                    <span class="comment-writer {% if comment.is_admin %}admin-badge{% endif %}">
                        {{ comment.author }}{% if comment.is_admin %} ğŸ‘‘{% endif %}
                    </span>
                    <span class="comment-date">{{ comment.reg_date|date:"Y-m-d H:i" }}</span>
                </div>

                <p class="comment-content">{{ comment.comment|linebreaksbr }}</p>
            </li>
            {% empty %}
            <li class="comment-empty">ì•„ì§ ë“±ë¡ëœ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</li>
            {% endfor %}
        </ul>
    </section>

</div>
{% endblock %}