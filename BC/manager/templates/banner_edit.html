{% extends 'manager_base.html' %}
{% load static %}

{% block title %}ë°°ë„ˆ ìˆ˜ì •{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/banner_form.css' %}">
{% endblock %}

{% block content %}
<div class="page-title-section">
    <h2 class="page-title">ë°°ë„ˆ ìˆ˜ì •</h2>
</div>

<div class="sub-container">
    <div class="sub-content">

        <div class="form-wrapper">
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}

                <!-- í•­ìƒ ì„œë²„ë¡œ ë„˜ì–´ê°€ê²Œ hidden ìƒì„± -->
                <input type="hidden" name="delete_file" id="deleteFileFlag" value="0">

                <div class="form-group full-row">
                    <label class="form-label">ì²¨ë¶€íŒŒì¼</label>

                    <div class="file-upload-wrapper">

                        <!-- ì‹¤ì œ íŒŒì¼ ì…ë ¥ -->
                        <input type="file" name="file" id="fileInput" class="file-input">
                        <label for="fileInput" class="file-upload-btn">ğŸ“ íŒŒì¼ ì„ íƒ</label>

                        <!-- í˜„ì¬ íŒŒì¼ í‘œì‹œ + ì‚­ì œ ë²„íŠ¼ -->
                        {% if banner.url %}
                        <div id="currentFileBox" class="current-file-box">
                            <span class="current-file-name">{{ banner.url }}</span>
                            <button type="button" class="file-remove-btn" id="deleteFileBtn">âœ•</button>
                        </div>
                        {% endif %}

                        <!-- ìƒˆ íŒŒì¼ëª… í‘œì‹œ ì˜ì—­ -->
                        <p id="uploadedFileName" style="margin-top:10px; display:none;"></p>

                    </div>
                </div>

                <div class="form-group full-row">
                    <label class="form-label">ì œëª©</label>
                    <input type="text" name="title" class="form-input"
                           value="{{ banner.title }}">
                </div>

                <div class="form-group full-row">
                    <label class="form-label">ë‚´ìš©</label>
                    <textarea name="context" class="form-textarea">{{ banner.context }}</textarea>
                </div>

                <div class="form-group full-row">
                    <label class="form-label">ì‹œì‘ ë‚ ì§œ</label>
                    <input type="datetime-local" name="start_date" class="form-input"
                           value="{{ banner.start_date|date:'Y-m-d\\TH:i' }}">
                </div>

                <div class="form-group full-row">
                    <label class="form-label">ì¢…ë£Œ ë‚ ì§œ</label>
                    <input type="datetime-local" name="end_date" class="form-input"
                           value="{{ banner.end_date|date:'Y-m-d\\TH:i' }}">
                </div>

                <div class="btn-row">
                    <button type="submit" class="btn btn-submit">ìˆ˜ì • ì™„ë£Œ</button>
                    <button type="button" class="btn btn-list" onclick="history.back()">ë’¤ë¡œê°€ê¸°</button>
                </div>

            </form>
        </div>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/banner_manager.js' %}"></script>
{% endblock %}
