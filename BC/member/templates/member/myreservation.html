{% extends 'common/base.html' %}
{% load static %}
{% block css %}
<link rel="stylesheet" href="{% static 'member/css/mypage_base.css' %}">
<link rel="stylesheet" href="{% static 'member/css/mypage.css' %}">

<style>
/* === í…Œì´ë¸” ì»¬ëŸ¼ ì¬ì •ì˜ ( !important ì—†ì´ ìì—°ìŠ¤ëŸ½ê²Œ override ) === */
.mypage-board-header {
    display: grid;
    grid-template-columns: 60px 200px 150px 160px 120px;
}

.mypage-board-row {
    display: grid;
    grid-template-columns: 60px 200px 150px 160px 120px;
}

/* ì·¨ì†Œëœ ì˜ˆì•½ íë¦¬ê²Œ */
.cancel-row {
    opacity: 0.6;
}

/* ì˜ˆì•½ë²ˆí˜¸ ì»¬ëŸ¼ í…ìŠ¤íŠ¸ */
.col-resnum {
    font-size: 14px;
    color: #555;
}

.partial-text {
    color: #f39c12;
    font-weight: 700;
}
.active-text {
    color: #2ecc71;
    font-weight: 700;
}
.cancel-text {
    color: #e74c3c;
    font-weight: 700;
}
</style>
{% endblock %}

{% block contents %}

<div class="register-container">
  <div class="register-wrapper">

    <div class="register-brand">
      <h2>My Page</h2>
      <ul class="register-brand-features">
        <li><a href="{% url 'member:info' %}">ë‚´ ì •ë³´</a></li>
        <li><a href="{% url 'member:myreservation' %}" class="active">ë‚´ ì˜ˆì•½ ë‚´ì—­</a></li>
        <li><a href="{% url 'member:myrecruitment' %}">ë‚´ ëª¨ì§‘ê¸€</a></li>
        <li><a href="{% url 'member:myarticle' %}">ë‚´ ê²Œì‹œê¸€</a></li>
        <li><a href="{% url 'member:myjoin' %}">ë‚´ ì°¸ì—¬ ë‚´ì—­</a></li>
      </ul>
    </div>

<main class="main">
    <h2>ë‚˜ì˜ ì‹œì„¤ì˜ˆì•½</h2>

<section class="mypage-board">

  <div class="mypage-board-top">
    <div class="mypage-board-top-left">
      <select class="mypage-select" name="order">
        <option value="recent">ìµœì‹ ìˆœ</option>
        <option value="title">ì‹œì„¤ëª…ìˆœ</option>
        <option value="views">ì˜ˆì•½ì¼ìˆœ</option>
      </select>
    </div>
    <div class="mypage-board-top-right">
      <select class="mypage-select" name="page_size">
        <option value="15">15ê°œ</option>
        <option value="30">30ê°œ</option>
        <option value="50">50ê°œ</option>
      </select>
    </div>
  </div>

  <!-- ë¦¬ìŠ¤íŠ¸ -->
  <div class="mypage-board-list">

    <div class="mypage-board-header">
        <span>ë²ˆí˜¸</span>
        <span>ì‹œì„¤ëª…</span>
        <span>ì˜ˆì•½ì¼ì</span>
        <span>ì˜ˆì•½ë²ˆí˜¸</span>
        <span>ìƒíƒœ</span>
    </div>

    {% for reservation in page_obj %}
    <a href="{% url 'member:myreservation_detail' reservation.reservation_num %}"
       class="mypage-board-row {% if reservation.is_cancelled %}cancel-row{% endif %}">

        <span>{{ forloop.counter0|add:page_obj.start_index }}</span>

        <span>{{ reservation.facility_name }}</span>

        <span>{{ reservation.reservation_date }}</span>

        <span class="col-resnum">{{ reservation.reservation_num }}</span>

        <span class="col-status">
            {% if reservation.status == "cancelled" %}
                <span class="cancel-text">ì·¨ì†Œë¨</span>
            {% elif reservation.status == "partial" %}
                <span class="partial-text">ë¶€ë¶„ì·¨ì†Œ</span>
            {% else %}
                <span class="active-text">ì˜ˆì•½ì¤‘</span>
            {% endif %}
        </span>

    </a>

    {% empty %}
      <div class="mypage-board-empty">ì˜ˆì•½ ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</div>
    {% endfor %}

  </div>

  
    <!-- í˜ì´ì§• ë²ˆí˜¸ -->

  </section>
  <div class="pagination">

      <!-- ğŸ”¹ ì´ì „ ë¸”ë¡ -->
      {% if block_start > 1 %}
          <a href="?page={{ block_start|add:-1 }}&per_page={{ per_page }}&sort={{ sort }}" class="page-btn arrow">â—€ ì´ì „</a>
      {% else %}
          <span class="page-btn arrow disabled">â—€ ì´ì „</span>
      {% endif %}

      <!-- ğŸ”¹ í˜ì´ì§€ ë²ˆí˜¸ 5ê°œì”© ë¸”ë¡ -->
      {% for num in block_range %}
          {% if num == page_obj.number %}
              <span class="page-btn active">{{ num }}</span>
          {% else %}
              <a href="?page={{ num }}&per_page={{ per_page }}&sort={{ sort }}" class="page-btn">{{ num }}</a>
          {% endif %}
      {% endfor %}

      <!-- ğŸ”¹ ë‹¤ìŒ ë¸”ë¡ -->
      {% if block_end < paginator.num_pages %}
          <a href="?page={{ block_end|add:1 }}&per_page={{ per_page }}&sort={{ sort }}" class="page-btn arrow">ë‹¤ìŒ â–¶</a>
      {% else %}
          <span class="page-btn arrow disabled">ë‹¤ìŒ â–¶</span>
      {% endif %}

  </div>

</main>
</div>
</div>

{% endblock %}
